@charset "utf-8";
@use "theme" as *;

// ページヘッダ＆ナビも統一
h1 {
    @include h1-grad;
    text-align: center;
    margin: 20px 0 12px;
}

a {
    text-decoration: none;
}

.move {
    @include btn-main;
}

.link-group {
    text-align: center;
    margin-bottom: 8px;
}

// ===== チャート =====
#chart {
    max-width: 1000px;
    margin: 0 auto;
    padding: 10px 16px 28px;
}

.chart-svg {
    width: 100%;
    height: auto;
    @include card;
    background: linear-gradient(180deg, rgba(255, 255, 255, .03), rgba(255, 255, 255, 0));
}

// グリッド・軸をピンク寄りで
.grid-line {
    stroke: rgba(255, 255, 255, .12);
    stroke-width: 1;
    shape-rendering: crispEdges;
}

.axes {
    .axis {
        stroke: rgba(255, 255, 255, .55);
        stroke-width: 1.2;
        shape-rendering: crispEdges;
    }

    .tick {
        stroke: rgba(255, 255, 255, .55);
        stroke-width: 1.2;
    }

    .tick-label,
    .axis-end {
        fill: $muted;
        font-size: 12px;
        user-select: none;
    }

    .axis-title {
        fill: $main-200;
        font-weight: 900;
        letter-spacing: .02em;
        user-select: none;
    }
}

// 点（gender 色は従来維持／選択やホバー強調はピンク）
.point {
    fill: $male;
    stroke: rgba(255, 255, 255, .95);
    stroke-width: 1.6;
    transition: transform .06s ease, r .06s ease, filter .2s ease, fill .2s ease;
    filter: drop-shadow(0 2px 6px rgba(0, 0, 0, .4));

    &.female {
        fill: $female;
    }

    &.male {
        fill: $male;
    }

    &.is-hover {
        filter: drop-shadow(0 6px 16px rgba(0, 0, 0, .55));
    }

    &.is-selected {
        stroke-width: 2.2;
        filter: drop-shadow(0 8px 22px rgba($main, .45));
    }
}

// ピックパネル（選択UI）
.pick-panel {
    display: grid;
    grid-template-columns: 1fr 1fr max-content;
    gap: 12px;
    margin-top: 10px;
    align-items: stretch;

    .slot {
        @include card;
        padding: 12px;
        display: grid;
        grid-template-rows: max-content 1fr;
        row-gap: 6px;

        &.filled {
            border-color: rgba($main, .45);
        }

        .slot-label {
            font-size: 12px;
            color: $muted;
        }

        .slot-name {
            font-weight: 900;
            margin-bottom: 4px;
        }

        .slot-value {
            font-size: 13px;
            color: $muted;
            line-height: 1.5;
        }
    }

    .actions {
        display: grid;
        align-content: start;
        gap: 8px;
    }

    .actions .btn {
        @include btn-main;
        padding: 10px 12px;

        &.loading {
            cursor: progress;
        }
    }

    @media (max-width: 720px) {
        grid-template-columns: 1fr;

        .actions {
            grid-auto-flow: column;
            grid-auto-columns: 1fr;
        }
    }
}

// モーダルのランクバッジ色（ピンク基調）
.modal__body .rank-line {
    font-size: 30px;
}

.modal__body .rank-badge {
    background: rgba($main, .18);
    color: $main;
    font-size: 30px;
}

.modal__body .dims .dim {
    @include card;
    border-radius: 12px;
    padding: 8px 10px;
    background: rgba(255, 255, 255, .04);
    margin-top: 30px;

    .dim-label {
        color: $muted;
        margin-right: 4px;
        font-size: 20px;
    }

    .dim-text {
        font-weight: 700;
        font-size: 20px;
    }
}

/* ====== Camera UI in Slot ====== */
.slot.filled .slot-media {
    margin-top: 10px;
    display: grid;
    grid-template-columns: minmax(220px, 1fr) 1fr;
    gap: 10px;
    align-items: start;

    .cam {
        position: relative;
        @include card;
        padding: 6px;
        background: rgba(255, 255, 255, .03);
        border-color: rgba($main, .28);

        video {
            width: 100%;
            height: auto;
            border-radius: 10px;
            background: #000;
            display: block;
        }
    }

    .cam-actions {
        display: grid;
        grid-auto-flow: row;
        gap: 8px;

        .btn {
            @include btn-main;
            padding: 8px 10px;
            font-size: 14px;

            &.cam-capture,
            &.cam-stop {
                opacity: .9;
            }

            &:disabled {
                opacity: .5;
                cursor: not-allowed;
            }
        }

        .file-label {
            input {
                display: none;
            }
        }
    }

    .thumb {
        grid-column: 1 / -1;
        display: grid;
        justify-content: start;

        img {
            width: 96px;
            height: 96px;
            border-radius: 999px;
            object-fit: cover;
            display: block;
            border: 2px solid rgba($main, .6);
            box-shadow: 0 6px 18px rgba($main, .25);
            background: rgba(255, 255, 255, .06);
        }
    }
}

@media (max-width: 720px) {
    .slot.filled .slot-media {
        grid-template-columns: 1fr;
    }
}

/* ====== Modal Pair Avatars ====== */
.modal__pair {
    .person {
        display: grid;
        grid-template-columns: max-content 1fr;
        gap: 10px;
        align-items: center;
    }

    .avatar {
        width: 64px;
        height: 64px;
        border-radius: 999px;
        background: linear-gradient(135deg, rgba($main, .25), rgba($main, .10));
        background-size: cover;
        background-position: center;
        border: 2px solid rgba($main, .55);
        box-shadow: 0 6px 18px rgba($main, .25);

        &.has-photo {
            /* 画像ありのときの見栄え補正だけ */
        }
    }

    .person-text {
        font-weight: 800;
    }
}

.button_wrapper {
    display: flex;
    justify-content: center;
    align-items: center;

    #button_match {
        margin: 20px 20px;
        width: 200px;

        button {
            font-size: 15px;
        }
    }
}

/* =========================
   SVGテキストの色・サイズ調整
   ========================= */

/* 好みで調整する値（色・サイズ） */
$svg-label-color: black; // 目盛数字（tick-label）
$svg-end-color: black; // 軸端の補足（axis-end）
$svg-title-color: black; // 軸タイトル（axis-title）

$svg-label-size: clamp(14px, 1.15vw, 14px); // 目盛数字の大きさ
$svg-end-size: clamp(14px, 1.3vw, 16px); // 軸端テキストの大きさ
$svg-title-size: clamp(14px, 1.6vw, 20px); // 軸タイトルの大きさ

.chart-svg {
    /* 見やすさ改善（任意） */
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
    font-smooth: always;

    /* SVG内テキストの共通フォント（任意） */
    text {
        font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
    }

    /* 目盛の数字（0/25/50/75/100） */
    .tick-label {
        fill: $svg-label-color;
        font-size: $svg-label-size;
        font-weight: 700;
    }

    /* 軸の端にある説明（例：感情的(0) / 論理的(100) / 仕事(100) / プライベート(0)） */
    .axis-end {
        fill: $svg-end-color;
        font-size: $svg-end-size;
        font-weight: 800;
        letter-spacing: .01em;
    }

    /* 軸タイトル（「論理的 ←→ 感情的」「仕事 ↑↓ プライベート」） */
    .axis-title {
        fill: $svg-title-color;
        font-size: $svg-title-size;
        font-weight: 900;
        letter-spacing: .02em;
    }
}

/* 画面幅が狭い時は少し小さめに（必要なら） */
@media (max-width: 640px) {
    .chart-svg {
        .tick-label {
            font-size: clamp(10px, 3.2vw, 12px);
        }

        .axis-end {
            font-size: clamp(11px, 3.6vw, 14px);
        }

        .axis-title {
            font-size: clamp(12px, 4.2vw, 18px);
        }
    }
}